<!DOCTYPE html>
<!--[if IE 8]>         <html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->

<head lang="en-US">
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width" />
  <title>MobileCan</title>


  <link rel="stylesheet" href="css/foundation/foundation.css" />
  <link rel="stylesheet" href="css/foundation-mobile.css" />


  <script src="js/vendor/custom.modernizr.js"></script>
  <style>
    .weather th{
      text-align: right;
    }
  </style>
</head>
<body>

  <nav class="top-bar">
    <ul class="title-area">
      <!-- Title Area -->
      <li class="name">
      <h1><a href="index.html">MobileCan</a></h1>
      </li>
      <!-- Remove the class "menu-icon" to get rid of menu icon. Take out "Menu" to just have icon alone -->
      <li class="toggle-topbar menu-icon"><a href="#"><span>Menu</span></a></li>
    </ul>

    <section class="top-bar-section">
      <!-- Left Nav Section -->
      <ul class="left">
        <li class="divider"></li>
        <li class="active"><a href="index.html">Home</a></li>
        <li class="divider"></li>
      </ul>

    </section>
  </nav>

  <div class="row">
    <div class="large-12 columns">
      <h1>MobileCan</h1>
      <section>
        <h2>Battery Status</h2>
        <div class="charging"></div>
        <div class="level"></div>
      </section>
      <section>
        <h2>Input Types</h2>
        <label for="email">Enter your email</label>
        <input type="email" id="email">
        <label for="tel">Enter your phone number</label>
        <input type="tel" id="tel">
        <label for="num">Enter your lucky number</label>
        <input type="number" id="num">
        <label for="date">Enter a date</label>
        <input type="date" id="date">
        <label for="month">Enter a month</label>
        <input type="month" id="month">
        <label for="search">Search</label>
        <input type="search" id="search" placeholder="Search">
      </section>
      <section class="weather">
        <h2>Geolocation</h2>
        <button class="locate">Get your local weather</button>
        <h3>Weather for <span class="city"></span></h3>
        <table>
          <tr>
            <th>Temp (C)</th>
            <td class="tempc"></td>
          </tr>
          <tr>
            <th>Temp (F)</th>
            <td class="tempf"></td>
          </tr>
          <tr>
            <th>Humidity</th>
            <td class="humid"></td>
          <tr>
            <th>Description</th>
            <td class="desc">
              <img class="icon">
            </td>
          </tr>
        </table>
      </section>
    </div>  

  </div>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
  <script>
    navigator.getBattery().then(function(battery) {

      var showCharging = function(){
        $('.charging').text("Battery charging? " + (battery.charging ? "Yes" : "No"));
      };

      var showLevel = function(){
        $('.level').text("Battery level: " + battery.level * 100 + "%");
      };

      showCharging();
      showLevel();

      battery.addEventListener('chargingchange', showCharging);

      battery.addEventListener('levelchange', showLevel);
    });

    if(! "geolocation" in navigator) {
      $('.locate').hide();
      $('.weather').append('Geolocation is not supported in your browser.')
    }

    $('.locate').click(function(){
      navigator.geolocation.getCurrentPosition(function(position) {
        var lat = position.coords.latitude;
        var lon = position.coords.longitude;
        var url = 'http://api.openweathermap.org/data/2.5/weather?lat=' + lat + '&lon=' + lon;
        $.getJSON(url, function(data){
          console.log(data);
          var tempc = data.main.temp - 273.15; //kelvin to celsius
          var tempf = tempc * 1.8 + 32;
          var icon = 'http://openweathermap.org/img/w/' + data.weather[0].icon + '.png';
          $('.tempc').text(Math.round(tempc));
          $('.tempf').text(Math.round(tempf));
          $('.humid').text(data.main.humidity + '%');
          $('.icon').attr('src', icon);
          $('.desc').append(data.weather[0].description);
          $('.city').text(data.name);

        });
      });
    });
  </script>
  <script>
  document.write('<script src=' +
  ('__proto__' in {} ? 'js/vendor/zepto' : 'js/vendor/jquery') +
  '.js><\/script>')
  </script>

  <script src="js/foundation.min.js"></script>
  <!--

  <script src="js/foundation/foundation.js"></script>

  <script src="js/foundation/foundation.alerts.js"></script>

  <script src="js/foundation/foundation.clearing.js"></script>

  <script src="js/foundation/foundation.cookie.js"></script>

  <script src="js/foundation/foundation.dropdown.js"></script>

  <script src="js/foundation/foundation.forms.js"></script>

  <script src="js/foundation/foundation.joyride.js"></script>

  <script src="js/foundation/foundation.magellan.js"></script>

  <script src="js/foundation/foundation.orbit.js"></script>

  <script src="js/foundation/foundation.placeholder.js"></script>

  <script src="js/foundation/foundation.reveal.js"></script>

  <script src="js/foundation/foundation.section.js"></script>

  <script src="js/foundation/foundation.tooltips.js"></script>

  <script src="js/foundation/foundation.topbar.js"></script>

  -->

  <script src="js/foundation-mobile.js"></script>

  <script>
    $(document).foundation();
  </script>
</body>
</html>
